# 网络编程

现在我们处在一个网络的时代，无论是浏览网页、微信聊天，还是发电子邮件、在线游戏都是网络应用程序。但值得高兴的时，所有的网络应用都是基于相同的基本编程模型，有着相似的整体逻辑结构，并且依赖相同的编程接口。

这一章主要介绍的内容有：
- 客户端-服务器模型
- Web客户端-服务器程序
- 开发一个功能齐全的Web服务器 

# 1. 客户端-服务器编程模型

每个网络应用都基于客户端-服务器模型，采用这个模型，一个应用是由一个服务器进程和一个或者多个客户端进程组成的。

服务器管理某种资源，并且通过操作这种资源来为它的客户端提供某种服务。Web服务器管理着一组磁盘文件，它会为客户端提供检索和执行的服务。

客户端-服务器模型中的基本操作是事务（transaction）。一般由下面四步组成。
1. 当一个客户端需要服务时，它向服务器发送一个请求，发起一个事务。
2. 服务器收到请求后，解释它，并以适当的方式操作它的资源。
3. 服务器给客户端发送一个响应，并等待下一个请求。
4. 客户端收到响应并处理它。

![](./images/ch11_01.png)

这里说的客户端和服务器指的是两个进程，它们完全有可能运行在一台机器上，而且一台机器上可能运行有多个客户端或者服务器。

> 这里说的C-S的事务不是数据库中的事务，数据库中一般要求有事务原子性，对于C-S来说不要求，服务端可以同时处理多个客户端的事务请求。

# 2. 网络

一般而言，客户端和服务器通常运行在不同的主机上，并且通过计算机网络的硬件和软件资源来通信。网络是一个复杂的系统，这里我们进行适当的简化，我们从程序员的角度给出一个切实可行的思维模型。

对于主机而言，网络只是一种I/O设备，是数据源和数据接收方，和磁盘、终端没什么分别。如下图所示：一个插到I/O总线扩展槽的适配器提供了到网络的物理接口。

从网络上接收到的数据从适配器经过I/O和内存总线复制到内存，通常是通过DMA传送。相似地，数据也能从内存输出到网络。

![](./images/ch11_02.png)

